<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../../../bower_components/px-vis/px-vis-svg.html">
<link rel="import" href="../../../bower_components/px-vis/px-vis-bar-svg.html">



<dom-module id="my-bar">
    <template>
        <px-vis-svg
                width="318"
                height="318"
                svg="{{svgBar}}">
        </px-vis-svg>
        <template is="dom-repeat" items="[[_returnStackData(singleChartData)]]">
            <px-vis-bar-svg
                    svg="[[svgBar]]"
                    chart-data="[[item]]"
                    series-key="[[item.key]]"
                    type="column"
                    dataset="single">
            </px-vis-bar-svg>
        </template>

    </template>
    <script>
        Polymer({
            is: 'my-bar',
            properties: {
                //basics
                width: {
                    type: Number,
                    value: 500
                },
                height: {
                    type: Number,
                    value: 200
                },
                margin: {
                    type: Object,
                    value: {
                        "top": 10,
                        "right": 10,
                        "bottom": 10,
                        "left": 10
                    }
                },
                singleChartData:{
                    type : Array,
                    value : [{
                        'x': "A",
                        'y': 0.56
                    },{
                        'x': "B",
                        'y': 0.4
                    },{
                        'x': "C",
                        'y': 0.43
                    },{
                        'x': "D",
                        'y': 0.33
                    },{
                        'x': "E",
                        'y': 0.47
                    },{
                        'x': "F",
                        'y': 0.41
                    }]
                }
            },
            _returnStackData: function() {
                var cd = this.singleChartData;
                return this._returnStack(cd);
            },
            _returnStack: function(chartData) {
                var stack = Px.d3.stack(),
                        keys =  ["y"];
                stack.keys(keys);
                return stack(chartData);
            },
        });
    </script>
</dom-module>